{% extends 'layouts/general-layout.html' %}
{% load static %}
{% block title %}Eliminar Cuenta{% endblock title %}

{% block banner %}
<section class="relative w-full h-[320px] md:h-[420px] lg:h-[500px] overflow-hidden ">

  <!-- Imagen -->
  <img 
    src="{% static 'img/banner0.jpg' %}" 
    alt="Banner principal del sitio"
    fetchpriority="high"
    loading="eager"
    class="w-full h-full object-cover mt-3"
  >

  <!-- Contenido centrado -->
  <div class="absolute inset-0 flex items-center justify-center bg-black/40">
    <div class="text-center px-4">
      <h1 class="text-white text-4xl md:text-6xl font-extrabold tracking-wide drop-shadow-xl mb-4">
        Eliminar Cuenta
      </h1>
      <p class="text-white text-base sm:text-lg md:text-xl font-medium max-w-2xl mx-auto drop-shadow-lg px-2">
        Confirmación requerida
      </p>
    </div>
  </div>

</section>
{% endblock banner %}

{% block content %}
<div class="max-w-md mx-auto mt-16 p-8 bg-white rounded-3xl shadow-2xl border border-gray-200">

    <div class="text-center mb-8">
        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
        </div>
        
        <h2 class="text-3xl font-bold text-red-600 mb-3">
            Eliminar Cuenta
        </h2>
        
        <p class="text-gray-700 mb-2">
            ¿Estás seguro de que deseas eliminar tu cuenta?
        </p>
        
        <div class="flex items-center justify-center gap-2 mb-6">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center">
                <span class="text-white font-bold">
                    {% if user.first_name %}
                        {{ user.first_name|first|upper }}
                    {% else %}
                        {{ user.username|first|upper }}
                    {% endif %}
                </span>
            </div>
            <div class="text-left">
                <p class="font-semibold text-gray-900">
                    {% if user.first_name or user.last_name %}
                        {{ user.first_name }} {{ user.last_name }}
                    {% else %}
                        {{ user.username }}
                    {% endif %}
                </p>
                <p class="text-sm text-gray-600">@{{ user.username }}</p>
            </div>
        </div>
        
        <div class="bg-gray-50 rounded-xl p-4 mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-gray-700">Artículos:</span>
                <span class="font-bold text-gray-900">{{ user.articulos.count|default:"0" }}</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-700">Comentarios:</span>
                <span class="font-bold text-gray-900">{{ user.comentario_set.count|default:"0" }}</span>
            </div>
        </div>
        
        <p class="text-red-600 font-semibold text-sm mb-4">
            ⚠️ Esta acción es irreversible.
        </p>
    </div>

    <form method="post" class="space-y-4">
        {% csrf_token %}

        <button type="submit" 
                class="w-full py-3.5 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
            Sí, eliminar mi cuenta
        </button>
    </form>

    <div class="text-center mt-6">
        <a href="{% url 'usuarios:perfil' %}" 
           class="inline-flex items-center gap-2 text-orange-600 hover:text-orange-700 font-semibold hover:underline">
           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
           </svg>
           Cancelar y volver a mi perfil
        </a>
        
        <p class="text-gray-500 text-sm mt-4">
            ¿Quieres hacer cambios en lugar de eliminar?
            <a href="{% url 'usuarios:editar_perfil' %}" class="text-orange-600 hover:underline ml-1">
                Editar mi perfil
            </a>
        </p>
    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const confirmed = confirm('¿Estás seguro de que quieres eliminar tu cuenta? Esta acción es permanente y no se puede deshacer.');
            if (!confirmed) {
                e.preventDefault();
            }
        });
    }
});
</script>

<style>
  /* Scrollbar personalizado */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #fed7aa;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, #f97316, #f59e0b);
  border-radius: 5px;
  border: 2px solid #fed7aa;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, #ea580c, #d97706);
}

button[type="submit"]:hover {
    transform: translateY(-2px);
}
</style>
{% endblock content %}